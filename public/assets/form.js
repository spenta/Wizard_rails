(function(a){a.fn.answerMultichoice=function(b){var c={addNone:true,noneText:"Ça ne m'intéresse pas"};return this.each(function(){var j=a(this);if(b){a.extend(c,b)}var k=j.find("label:has(input:checkbox)").labelCheckbox().bind("select",i).bind("unselect",g);if(c.addNone){var f=a("<label/>").append(a("<span/>").html(c.noneText).addClass("name")).append(a("<span/>").addClass("icon")).toggleClass("selected",h().length<=0).addClass("checkbox").addClass("none").click(e);k.last().after(f).after(a("<hr/>"))}d();function i(m,l){if(l){if(c.addNone&&h().length>0){f.toggleClass("selected",false)}d()}}function g(m,l){if(l){if(c.addNone&&h().length<=0){f.toggleClass("selected",true)}d()}}function e(l){l.stopPropagation();l.preventDefault();f.addClass("selected");h().trigger("unselect");d()}function h(){return k.not(".none").filter(".selected")}function d(){var l=h().find(".name").map(function(){return a(this).text()}).get();var m=l.length>0;j.trigger("change",[m,m?l.join(", ")+"...":""])}})}})(jQuery);(function(a){a.fn.labelCheckbox=function(){return this.each(function(){var e=a(this).addClass("checkbox").bind("click",g).bind("select",c).bind("unselect",b).append(a("<span/>").addClass("icon"));var d=e.find("input:checkbox");if(d.length<=0){return}d.hide();f(d.attr("checked"));function g(h){h.stopPropagation();h.preventDefault();e.trigger(!d.attr("checked")?"select":"unselect",[true])}function c(i,h){f(true)}function b(i,h){f(false)}function f(h){e.toggleClass("selected",h);d.attr("checked",h)}})}})(jQuery);(function(a){a.fn.selectSlider=function(){return this.each(function(){var f=a(this).hide();var g=f.hasClass("nosnap");var c=f.find("option");var h=c.length-1;var b={};b.min=0;b.max=h;b.step=1;if(g){b.min=parseInt(c.first().attr("value"));b.max=parseInt(c.last().attr("value"))}b.slide=function(i,j){if(g){d.attr("value",j.value);f.attr("value",j.value)}else{f.attr("value",a(c[j.value]).attr("value"))}};var e=a("<span></span>").slider(b);f.after(e);c.each(function(j,k){e.append(a("<span />").html(!a(k).attr("disabled")?a(k).html():"").css("left",j/h*100+"%"));if(f.attr("value")==a(k).attr("value")){e.slider("value",g?f.attr("value"):j)}});e.slider("option","animate",true);var d;if(g){f.html("");d=a("<option></option>").html("ratio").attr("value",e.slider("value")).attr("selected",true).appendTo(f)}})}})(jQuery);(function(a){a.fn.tabbedForm=function(b){var c={closeText:"Valider",infoContainer:null};return this.each(function(){var g=a(this).addClass("tabbed");if(b){a.extend(c,b)}var f=g.find(".question").tabbedQuestion({closeText:c.closeText}).bind("clickToOpen",h).bind("clickToClose",j);d(f,"button");var e;if(c.infoContainer){var e=c.infoContainer.html();f.find(".qinfo").hide()}function h(m){var l=a(this);d(l,"opened");d(f.not(this),"tabbed");g.find("input:submit").hide();g.find("a.prev-button").hide();if(c.infoContainer){var k=l.find(".qinfo:first");i(k.length>0?k.html():e)}g.css("min-height",0);l.find(".qbody").css("min-height",g.height());g.css("min-height",l.find(".qbody").outerHeight()+"px")}function j(l){var k=a(this);d(f,"button");g.find("input:submit").show();g.find("a.prev-button").show();if(c.infoContainer){i(e)}g.css("min-height",0);f.find(".qbody").css("min-height",0)}function d(k,l){switch(l){case"button":case"tabbed":k.trigger("close");break;case"opened":k.trigger("open");break}k.toggleClass("button",l=="button");k.toggleClass("tabbed",l=="tabbed");k.toggleClass("opened",l=="opened")}function i(k){c.infoContainer.stop().fadeTo(200,0,function(){c.infoContainer.html(k).fadeTo(200,1)})}})};a.fn.tabbedQuestion=function(b){var c={closeText:"Valider"};return this.each(function(){var i=a(this).bind("open",h).bind("close",d);if(b){a.extend(c,b)}var g=i.find(".answer");var l=i.find(".qdesc");var k=a("<span/>").addClass("close").append(a("<span/>").addClass("label").html(c.closeText)).append(a("<span/>").addClass("icon")).appendTo(g.first()).bind("click",f);var e=a("<p/>").addClass("qabst");i.find(".qname").after(e);i.find(".answer.multichoice:first").bind("change",function(o,m,n){i.toggleClass("selected",m);e.html(n)});function h(m){e.hide();i.unbind("click",j)}function d(m){e.show();i.unbind("click",j);i.bind("click",j)}function j(m){m.preventDefault();m.stopPropagation();i.trigger("clickToOpen")}function f(m){m.preventDefault();m.stopPropagation();i.trigger("clickToClose")}})}})(jQuery);function UsageForm(e){var a="<a class='close'><span class='icon'></span><span class='label'>Valider</span></a>";var d={OPENED:"opened",CLOSED:"closed",TABBED:"tabbed"};var b=$(e);b.find(".usage").each(function(m,n){k($(n),d.CLOSED)});console.log(b.find(".usage .usage-content .subusages .clear"));b.find(".usage .usage-content .subusages .clear").each(function(m,n){$(n).before($(a).click(g))});b.find(".usage .usage-content .subusages .subusage").click(j);c(b.find(".subusage:has(input:checked)"),true);c(b.find(".subusage:has(:checkbox:not(:checked))"),false);b.find(".subusage input:checkbox").hide();function f(m){m.stopPropagation();i($(this))}function g(m){m.stopPropagation();b.find("input:submit").show();k(b.find(".usage"),d.CLOSED)}function j(m){m.stopPropagation();m.preventDefault();l($(this))}function i(p){k(p,d.OPENED);k(b.find(".usage[id!="+p.attr("id")+"]"),d.TABBED);var m=b.find(".usage");var q=m.size();var o=parseInt(m.css("margin-bottom"));console.log(o);p.find(".usage-content").css("min-height",m.outerHeight()*q+(q-1)*o);b.find("input:submit").hide()}function k(o,n){o.removeClass(d.OPENED).removeClass(d.CLOSED).removeClass(d.TABBED).unbind("click").addClass(n);o.find(".usage-content").css("min-height",0);var m=o.find(".usage-icon").unbind("click");switch(n){case d.CLOSED:case d.TABBED:o.click(f);break;case d.OPENED:m.click(g);break}}function l(m){var n=m.parent().parent().parent();if(m.hasClass("none")){c(m,true);c(n.find(".subusage:not(.none)"),false)}else{c(m,!h(m));c(n.find(".subusage.none"),n.find(".subusage:not(.none):has(:checkbox:checked)").length==0)}var o=n.find(".subusage:not(.none):has(:checkbox:checked)");if(o.length>0){n.toggleClass("selected",true);n.find(".abst").text(o.find("label").map(function(){return $(this).text()}).get().join(", ")+"...")}else{n.toggleClass("selected",false);n.find(".abst").text("")}}function c(m,n){m.toggleClass("selected",n);m.find("input:checkbox").attr("checked",n)}function h(m){return m.find("input:checkbox").attr("checked")}}$j=jQuery.noConflict();$j(document).ready(function(){$j("#popup").hide();$j("#overlay").hide();$j("#wait_1").hide();$j("#wait_2").hide();$j("#wait_3").hide();$j(".next-button").click(function(){$j("#popup").toggle();$j("#overlay").toggle();$j("#wait_1").delay(50).fadeIn("slow");$j("#wait_2").delay(150).fadeIn("slow");$j("#wait_3").delay(250).fadeIn("slow")})});